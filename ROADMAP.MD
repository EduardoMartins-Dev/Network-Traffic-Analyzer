# ğŸ—ºï¸ Roadmap: Network Traffic Analyzer (Enterprise Architecture)

Este documento descreve o plano de evoluÃ§Ã£o do projeto **Network Traffic Analyzer**, focado em alta performance, escalabilidade e desacoplamento de serviÃ§os utilizando uma **Arquitetura Orientada a Eventos (EDA)**.

---

## ğŸ Fase 1: FundaÃ§Ã£o e Captura (The Sniffer)
**Objetivo:** Estabelecer o ambiente de desenvolvimento e garantir que o cÃ³digo em C consiga "enxergar" e interagir com a interface de rede via `libpcap`.

- [ ] **ConfiguraÃ§Ã£o do Lab:**
    - [ ] Subir VM Kali Linux (Monitor) e VM Alvo.
    - [ ] Garantir conectividade isolada (Host-only/NAT Network).
- [ ] **Hello World Libpcap:**
    - [ ] Inicializar dispositivo de rede em modo promÃ­scuo.
    - [ ] Implementar loop de captura simples (`pcap_loop`).
    - [ ] Imprimir mensagem no terminal a cada pacote recebido.
- [ ] **Filtros BPF (Berkeley Packet Filter):**
    - [ ] Aplicar filtros para ignorar trÃ¡fego SSH (porta 22).
    - [ ] Focar a captura apenas em protocolos de interesse (TCP/UDP/ICMP).

## ğŸ§  Fase 2: O Motor de AnÃ¡lise (Protocol Dissector)
**Objetivo:** Traduzir bytes brutos (*Raw Data*) capturados do cabo de rede em informaÃ§Ãµes estruturadas e legÃ­veis.

- [ ] **Estruturas de Dados (Structs):**
    - [ ] Mapear cabeÃ§alho Ethernet (MAC Address).
    - [ ] Mapear cabeÃ§alho IP (IP Src/Dst, TTL, Protocolo).
    - [ ] Mapear cabeÃ§alho TCP/UDP (Portas, Flags).
- [ ] **AritmÃ©tica de Ponteiros:**
    - [ ] Implementar lÃ³gica matemÃ¡tica para "pular" cabeÃ§alhos (Offset) e ler o payload.
    - [ ] Extrair e exibir dados formatados: `[TCP] 192.168.1.5:443 -> 192.168.1.10:55432`.

## ğŸ‡ Fase 3: Camada de Mensageria & SerializaÃ§Ã£o (Middleware)
**Objetivo:** Desacoplar a captura do armazenamento. O Sniffer (C) nÃ£o deve gravar no banco diretamente para nÃ£o perder performance; ele apenas "avisa" a fila.

- [ ] **Infraestrutura RabbitMQ:**
    - [ ] Adicionar serviÃ§o `rabbitmq` ao `docker-compose.yml`.
    - [ ] Configurar *Exchange* e *Queue* (ex: `network_events`).
- [ ] **SerializaÃ§Ã£o de Dados (C para JSON):**
    - [ ] Integrar biblioteca de JSON em C (`cJSON` ou `Jansson`).
    - [ ] Criar funÃ§Ã£o `packet_to_json()`: Converter a `struct` do pacote em string JSON.
- [ ] **Conector AMQP (C Client):**
    - [ ] Integrar biblioteca `rabbitmq-c` (librabbitmq).
    - [ ] Implementar conexÃ£o persistente com o Broker.
    - [ ] Publicar JSON na fila a cada pacote processado.

## âš™ï¸ Fase 4: O Consumidor e PersistÃªncia (The Worker)
**Objetivo:** Ler da fila em alta velocidade e gravar no banco de dados de forma assÃ­ncrona.

- [ ] **Worker Service (Python/Go/Telegraf):**
    - [ ] Criar um script/serviÃ§o separado que escuta a fila do RabbitMQ.
    - [ ] *Nota:* Isso remove a carga de I/O (Input/Output) do programa principal em C.
- [ ] **Banco de Dados (Time Series):**
    - [ ] Configurar **InfluxDB** via Docker.
    - [ ] Implementar escrita em lote (*Batch Write*) para otimizar performance.
    - [ ] Gravar mÃ©tricas essenciais: `bytes_sent`, `packets_count`, `flags_detected`.

## ğŸ“Š Fase 5: VisualizaÃ§Ã£o e OperaÃ§Ã£o (SOC Dashboard)
**Objetivo:** Transformar dados brutos em inteligÃªncia visual para o analista de seguranÃ§a.

- [ ] **Grafana Setup:**
    - [ ] Conectar Grafana ao InfluxDB (DataSource).
- [ ] **Dashboards Operacionais:**
    - [ ] **VelocÃ­metro:** Throughput da rede em tempo real (MB/s).
    - [ ] **Top Talkers:** Ranking dos IPs que mais geram trÃ¡fego.
    - [ ] **Mapa de Calor:** Portas e serviÃ§os mais acessados.
    - [ ] **Indicador de AmeaÃ§as:** Contagem de pacotes suspeitos/anÃ´malos.

## ğŸ›¡ï¸ Fase 6: InteligÃªncia de SeguranÃ§a (IDS Engine)
**Objetivo:** Implementar lÃ³gica de anÃ¡lise comportamental para detecÃ§Ã£o de intrusÃ£o.

- [ ] **AnÃ¡lise de Flags TCP:**
    - [ ] Detectar combinaÃ§Ãµes anÃ´malas (Ex: *Null Scan*, *Xmas Scan*).
- [ ] **Detector de Port Scan:**
    - [ ] Implementar lÃ³gica temporal: "Se IP X acessar > 10 portas diferentes em < 1s -> ALERTA".
    - [ ] Publicar alertas em uma fila dedicada (`security_alerts`).
- [ ] **Detector de DoS (Syn Flood):**
    - [ ] Calcular razÃ£o SYN/ACK. Desbalanceamento alto indica possÃ­vel ataque.
- [ ] **Logging de Alerta:**
    - [ ] Enviar notificaÃ§Ã£o crÃ­tica (Log local ou Webhook).

---
> *Este roadmap transforma o projeto de um simples script acadÃªmico em uma arquitetura de microsserviÃ§os utilizada em grandes empresas de seguranÃ§a.*
